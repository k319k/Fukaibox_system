封解Box フロントエンド実装計画書 (React + HeroUI)

1. 開発環境・コアスタック言語: JavaScript (ES6+)フレームワーク: React 18+ (Vite)UIライブラリ: HeroUI (旧NextUI) + Tailwind CSSアイコン: Lucide Reactアニメーション: Framer Motion状態管理: Zustand (Global State)ローカルDB: Dexie.js (IndexedDBによるオフライン保護)クラウド同期: Firebase SDK (Firestore / Auth / Storage)
2. デザインシステム (Akane & Washi)カラーパレットPrimary: #B3424A (茜色 / Akane) - アクションボタン、アクティブ状態Secondary: #E0D2C3 (生成り / Kinari) - カード背景、セカンダリボタンBackground: washi_paper.avif を body に固定し、bg-fixed で質感を表現Text: #2C2C2C (墨色 / Sumi) - 視認性の高い黒コンポーネントスタイルGlassmorphism: 和紙の質感を活かすため、パネル類は bg-white/70 backdrop-blur-md を基本とする。Border: 筆致を感じさせる細い境界線 (border-zinc-300/50)。Shadow: 浮遊感よりも、紙が重なっているような平面的かつ繊細な影。
3. 「1ファイル200行」の徹底分割戦略各ディレクトリ内で役割を細分化し、ロジックと見た目を分離する。ディレクトリ構造案src/
 ├── components/       # 共通UI（Button, Card等 - 各100行以内）
 ├── features/         # 機能単位（Sheets, Editor, Auth）
 │    ├── Sheets/
 │    │    ├── hooks/  # ロジックのみ抽出
 │    │    ├── views/  # 見た目のみ（複数ファイルに分割）
 │    │    └── store/  # 機能別Zustandストア
 ├── hooks/            # 共通カスタムフック
 ├── lib/              # Dexie / Firebase 初期化
 └── stores/           # 全域状態管理
4. 状態管理と同期フロー書き込み: ユーザー操作 → Zustandストア更新 → Dexie.js (IndexedDB) に即時保存。同期: オンライン復帰時または一定間隔で Dexie の未同期データを Firestore へ push。読み込み: 初回起動時に Dexie からロード（高速表示）。その後 Firestore と差分同期。
5. 主要コンポーネントの実装詳細Layout/AkaneSidebar.jsx左側に固定。モバイル時はドロワー。コンテンツ:ロゴ（茜色）ナビメニュー（Listbox コンポーネントを活用）ユーザー情報 & 現在の累積点数（ゲーミフィケーション要素）Sheets/SheetEditor.jsxメインの編集エリア。HeroUI の Tabs を使い、「編集」「プレビュー」「メタ情報」を切り替え可能にする。1ファイルが肥大化しないよう、EditorHeader.jsx, ContentArea.jsx, MetadataSidebar.jsx に分割。
6. 実装の優先順位Phase 1 (Infrastructure): Vite + HeroUI + Tailwind 設定。茜色テーマの定義。Phase 2 (Layout): 左サイドバーとレスポンシブ・グリッドの構築。和紙背景の実装。Phase 3 (Local Data): Dexie.js によるシートの保存・読み込み（オフライン完結型）。Phase 4 (Cloud & Auth): Discordログインの実装と Firestore 同期。Phase 5 (Polish): Framer Motion による和風なページ遷移アニメーションの追加。
